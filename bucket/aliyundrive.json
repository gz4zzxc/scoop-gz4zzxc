{
    "version": "6.9.1",
    "description": "阿里云盘官方桌面客户端",
    "homepage": "https://www.aliyundrive.com/",
    "license": "Proprietary",
    "notes": [
        "阿里云盘官方桌面客户端",
        "支持快速上传下载、文件管理、在线预览等功能",
        "安装后可在开始菜单或桌面找到阿里云盘图标",
        "首次使用需要登录阿里云账号"
    ],
    "architecture": {
        "64bit": {
            "url": "https://cdn.aliyundrive.net/downloads/apps/desktop/aDrive-6.9.1.exe",
            "hash": "cc40289de6c35821214c816b8a1101c3ada822f05c7da3b770ae432067eea76a"
        }
    },
    "pre_install": [
        "# 使用自定义 UA 下载并解包，解决 CDN 对默认 UA 的限制",
        "$downloadUrl = \"https://cdn.aliyundrive.net/downloads/apps/desktop/aDrive-$version.exe\"",
        "$outputFile = \"$dir\\aDrive-$version.exe\"",
        "$userAgent = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36'",
        "Invoke-WebRequest -Uri $downloadUrl -UserAgent $userAgent -OutFile $outputFile -UseBasicParsing",
        "Expand-7ZipArchive $outputFile $dir -Removal",
        "if (Test-Path \"$dir\\app-64.7z\") { Expand-7ZipArchive \"$dir\\app-64.7z\" \"$dir\" -Removal }",
        "if (Test-Path \"$dir\\app.7z\") { Expand-7ZipArchive \"$dir\\app.7z\" \"$dir\" -Removal }",
        "@('uninst.exe.nsis', '$PLUGINSDIR') | ForEach-Object { if (Test-Path \"$dir\\$_\") { Remove-Item \"$dir\\$_\" -Recurse -Force -ErrorAction SilentlyContinue } }"
    ],
    "bin": "aDrive.exe",
    "shortcuts": [
        [
            "aDrive.exe",
            "阿里云盘"
        ]
    ],
    "post_install": [
        "Write-Host '阿里云盘已安装完成！' -ForegroundColor Cyan",
        "Write-Host '您可以在开始菜单或桌面找到阿里云盘图标' -ForegroundColor Yellow",
        "Write-Host '首次使用请登录您的阿里云账号' -ForegroundColor Yellow"
    ],
    "checkver": {
        "url": "https://www.aliyundrive.com/download",
        "regex": "aDrive-([\\d.]+)\\.exe",
        "useragent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://cdn.aliyundrive.net/downloads/apps/desktop/aDrive-$version.exe"
            }
        },
        "hash": {
            "mode": "download"
        }
    }
}