{
  "version": "1.112.0",
  "description": "LobeChat 是一个开源的多模型 AI 聊天与增强工具，支持多模型、本地/云部署、插件体系与多端同步 (Desktop Electron 版)",
  "homepage": "https://github.com/lobehub/lobe-chat",
  "license": "Apache-2.0 (with additional commercial clause)",
  "notes": [
    "此包使用官方 Windows 安装程序 (electron-builder NSIS)，支持 /S 静默安装",
    "首次启动会创建用户数据目录于 %APPDATA% 或 %LOCALAPPDATA%",
    "更新时如有进程占用，请先退出托盘后再执行 scoop update lobechat"
  ],
  "url": "https://github.com/lobehub/lobe-chat/releases/download/v1.112.0/LobeHub-Beta-1.112.0-setup.exe#dl.7z",
  "hash": "TODO-REPLACE-HASH",
  "installer": {
    "script": [
      "$exe = Get-ChildItem $dir -Filter 'LobeHub-Beta-*-setup.exe' | Select-Object -First 1 | ForEach-Object { $_.FullName }",
      "if(-not $exe){ throw '未找到安装文件 (*.exe)' }",
      "Write-Host '静默安装 LobeChat...' -ForegroundColor Cyan",
      "Start-Process -FilePath $exe -ArgumentList '/S' -Wait -PassThru | Out-Null"
    ]
  },
  "uninstaller": {
    "script": [
      "Write-Host '尝试静默卸载 LobeChat...' -ForegroundColor Cyan",
      "$regPaths = 'HKCU:','HKLM:' | ForEach-Object { Join-Path $_ 'SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall' }",
      "$entry = Get-ChildItem $regPaths -ErrorAction SilentlyContinue | Get-ItemProperty | Where-Object { $_.DisplayName -match 'LobeHub' -or $_.DisplayName -match 'LobeChat' } | Select-Object -First 1",
      "if($entry -and $entry.UninstallString){",
      "  $cmd = $entry.UninstallString",
      "  if($cmd -match '^(\"[^\"]+\")'){ $path=$matches[1].Trim('\"') } else { $path = ($cmd -split ' ')[0] }",
      "  if(Test-Path $path){ Start-Process -FilePath $path -ArgumentList '/S' -Wait; Write-Host '卸载完成' -ForegroundColor Green } else { Write-Host '未找到卸载程序: ' $path -ForegroundColor Yellow }",
      "} else { Write-Host '未找到卸载信息 (可能已被移除)' -ForegroundColor Yellow }"
    ]
  },
  "checkver": {
    "github": "lobehub/lobe-chat",
    "regex": "v([\\d.]+)"
  },
  "autoupdate": {
    "url": "https://github.com/lobehub/lobe-chat/releases/download/v$version/LobeHub-Beta-$version-setup.exe#dl.7z"
  }
}
