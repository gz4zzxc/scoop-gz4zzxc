{
    "version": "6.4.2.0",
    "description": "滴答清单 (TickTick) —— 待办/日历/番茄融合的效率工具 (便携解包)",
    "homepage": "https://www.dida365.com/",
    "license": "Proprietary",
    "notes": [
        "使用 InnoSetup 安装包的解包 (innounp) 方式，避免写入 Program Files 与 UAC",
        "如果上游更改打包方式导致解包失败，请反馈更新 manifest",
        "卸载不会删除本地用户数据 (位于 %APPDATA% / %LOCALAPPDATA%)"
    ],
    "architecture": {
        "64bit": {
            "url": "https://www.dida365.com/down/getApp/download?type=win64#/dl.exe",
            "hash": "9b69886a39a7bcaaf534a164f9ff37bc9f95c05496d83f4d0e8fd50129f56498"
        },
        "32bit": {
            "url": "https://www.dida365.com/down/getApp/download?type=win#/dl.exe",
            "hash": "884bb5e53306e5f5d3f316d2f57ee9e849092f12d00950858ae577858a7ab7a1"
        }
    },
    "innosetup": true,
    "pre_install": "# 可选：清理多余快捷方式，如有需要可在此添加",
    "bin": "TickTick.exe",
    "shortcuts": [
        [
            "TickTick.exe",
            "滴答清单"
        ]
    ],
    "checkver": {
        "script": [
            "$dl_url64 = 'https://www.dida365.com/down/getApp/download?type=win64#/dl.exe'",
            "$tmp = cache_path 'dida365' '64bit' $dl_url64",
            "Invoke-WebRequest $dl_url64 -OutFile $tmp -UseBasicParsing",
            "$ver = (Get-Item $tmp).VersionInfo.ProductVersion",
            "if (-not $ver) { throw '无法从安装包元数据获取版本号' }",
            "$ver"
        ],
        "regex": "(\\S+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://www.dida365.com/down/getApp/download?type=win64#/dl.exe"
            },
            "32bit": {
                "url": "https://www.dida365.com/down/getApp/download?type=win#/dl.exe"
            }
        }
    }
}
